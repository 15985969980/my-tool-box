const t={strings:"默认的打字效果",startDelaySpeed:200,deleteSpeed:100,shouldDelete:!1,sleepTime:2e3};class e extends class{on(t,e){return(this.list[t]||(this.list[t]=[])).push(e),this}once(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this}off(t,e){let i=this.list[t];if(!i)return!1;if(e){let t;for(let n=0,s=i.length;s>n;n++)if(t=i[n],t===e||t.fn===e){i.splice(n,1);break}}else i&&(i.length=0);return this}emit(){[].shift.call(arguments);let t=[];for(let e in this.list)Array.isArray(this.list[e])?t.push(...this.list[e]):t.push(this.list[e]);return!(!t||0===t.length)&&(t.forEach((t=>{t.apply(this,arguments)})),this)}}{data;isStopWriting=!1;constructor(e){super(),this.data=Object.assign(t,e),console.log(this.data),this._init()}_init(){const t=this.data;let e=" ",i=0,n=Array.isArray(t.strings)&&t.strings[i].split("")||(t.strings=["strings must be Array"])[0],s="typing",a=null;const r=()=>{++i>t.strings.length-1&&(i=0),n=t.strings[i].split("")},l=async i=>{if(clearTimeout(a),"typing"==s)n.length>i?(e+=n[i],this.textNodeChange(e),++i):(await this.sleep(t.sleepTime),t.shouldDelete?s="delete":(e=" ",this.textNodeChange(e),i=0,r()));else if("delete"==s)if(i>0){let t=e.split("");t.length=t.length-1,e=t.join(""),this.textNodeChange(e),--i}else s="typing",r();a=this.isStopWriting?null:setTimeout((()=>l(i)),"typing"==s?t.startDelaySpeed:t.deleteSpeed)};l(0)}stopWriting(){this.isStopWriting=!0}startWriting(){this.isStopWriting=!1}textNodeChange(t){if(this.data.changeCallback)this.data.changeCallback&&"function"==typeof this.data.changeCallback&&this.data.changeCallback(t);else{if(!window||!document)throw Error("elm and changeCallback all is no definition");{const e=document&&document.querySelector(this.data.elm);if(!e)return void console.log("elm is no definition");e.innerHTML=t}}}sleep(t){return new Promise((e=>setTimeout(e,t)))}}var i=[],n=[];!function(t,e){if(t&&"undefined"!=typeof document){var s,a=!0===e.prepend?"prepend":"append",r=!0===e.singleTag,l="string"==typeof e.container?document.querySelector(e.container):document.getElementsByTagName("head")[0];if(r){var o=i.indexOf(l);-1===o&&(o=i.push(l)-1,n[o]={}),s=n[o]&&n[o][a]?n[o][a]:n[o][a]=h()}else s=h();65279===t.charCodeAt(0)&&(t=t.substring(1)),s.styleSheet?s.styleSheet.cssText+=t:s.appendChild(document.createTextNode(t))}function h(){var t=document.createElement("style");if(t.setAttribute("type","text/css"),e.attributes)for(var i=Object.keys(e.attributes),n=0;i.length>n;n++)t.setAttribute(i[n],e.attributes[i[n]]);return l.insertAdjacentElement("prepend"===a?"afterbegin":"beforeend",t),t}}('.typing::after {\n  content: "|";\n  animation: blink 1s infinite;\n}\n\n@keyframes blink {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}',{});export{e as Typing};
